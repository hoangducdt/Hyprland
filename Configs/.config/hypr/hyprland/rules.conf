# ######## Quy tắc cửa sổ ########
# Đặt độ trong suốt cho cửa sổ không phải toàn màn hình
windowrule = opacity $windowOpacity override, fullscreen:0

# Các cửa sổ không trong suốt (opaque) - vì chúng có độ trong suốt riêng hoặc ta muốn chúng đục
windowrule = opaque, class:kitty|equibop|org\.quickshell|imv|swappy
# Căn giữa tất cả cửa sổ nổi (trừ xwayland vì popup)
windowrule = center 1, floating:1, xwayland:0

# Các cửa sổ nổi (Float)
windowrule = float, class:guifetch  # FlafyDev/guifetch
windowrule = float, class:yad
windowrule = float, class:zenity
windowrule = float, class:wev
windowrule = float, class:org\.gnome\.FileRoller
windowrule = float, class:file-roller  # TẠI SAO CÓ HAI CÁI
windowrule = float, class:blueman-manager
windowrule = float, class:com\.github\.GradienceTeam\.Gradience
windowrule = float, class:feh
windowrule = float, class:imv
windowrule = float, class:system-config-printer
windowrule = float, class:org\.quickshell

# Nổi, thay đổi kích thước và căn giữa
# Cửa sổ nmtui (quản lý mạng) trong kitty
windowrule = float, class:kitty, title:nmtui
windowrule = size 60% 70%, class:kitty, title:nmtui
windowrule = center 1, class:kitty, title:nmtui
# Cài đặt GNOME
windowrule = float, class:org\.gnome\.Settings
windowrule = size 70% 80%, class:org\.gnome\.Settings
windowrule = center 1, class:org\.gnome\.Settings
# Điều khiển âm lượng và trình duyệt biểu tượng
windowrule = float, class:org\.pulseaudio\.pavucontrol|yad-icon-browser
windowrule = size 60% 70%, class:org\.pulseaudio\.pavucontrol|yad-icon-browser
windowrule = center 1, class:org\.pulseaudio\.pavucontrol|yad-icon-browser
# Công cụ chỉnh giao diện
windowrule = float, class:nwg-look
windowrule = size 50% 60%, class:nwg-look
windowrule = center 1, class:nwg-look

# Không gian làm việc đặc biệt
windowrule = workspace special:sysmon, class:btop  # Giám sát hệ thống
windowrule = workspace special:music, class:feishin|Spotify|Supersonic|Cider  # Âm nhạc
windowrule = workspace special:music, initialTitle:Spotify( Free)?  # Spotify wayland, không có class
windowrule = workspace special:communication, class:discord|equibop|vesktop|whatsapp  # Liên lạc
windowrule = workspace special:todo, class:Todoist  # Quản lý công việc

# Hộp thoại
windowrule = float, title:(Select|Open)( a)? (File|Folder)(s)?  # Chọn/Mở tệp/thư mục
windowrule = float, title:File (Operation|Upload)( Progress)?  # Tiến trình tệp
windowrule = float, title:.* Properties  # Thuộc tính
windowrule = float, title:Export Image as PNG  # Xuất ảnh PNG
windowrule = float, title:GIMP Crash Debug  # Gỡ lỗi GIMP
windowrule = float, title:Save As  # Lưu như
windowrule = float, title:Library  # Thư viện

# Picture in picture (thay đổi kích thước và di chuyển qua script)
# Di chuyển ban đầu để cửa sổ không bay qua màn hình từ giữa
windowrule = move 100%-w-2% 100%-w-3%, title:Picture(-| )in(-| )[Pp]icture
windowrule = keepaspectratio, title:Picture(-| )in(-| )[Pp]icture  # Giữ tỷ lệ khung hình
windowrule = float, title:Picture(-| )in(-| )[Pp]icture
windowrule = pin, title:Picture(-| )in(-| )[Pp]icture  # Ghim cửa sổ

# Steam
windowrule = rounding 10, title:, class:steam  # Bo góc 10px
windowrule = float, title:Friends List, class:steam  # Danh sách bạn bè
windowrule = immediate, class:steam_app_[0-9]+  # Cho phép tearing cho game Steam
windowrule = idleinhibit always, class:steam_app_[0-9]+  # Luôn ngăn chế độ nghỉ khi chơi game Steam

# ATLauncher console
windowrule = float, class:com-atlauncher-App, title:ATLauncher Console

# Autodesk Fusion 360
windowrule = noblur, title:Fusion360|(Marking Menu), class:fusion360\.exe  # Không làm mờ

# Ugh popup xwayland
windowrule = nodim, xwayland:1, title:win[0-9]+  # Không làm tối
windowrule = noshadow, xwayland:1, title:win[0-9]+  # Không đổ bóng
windowrule = rounding 10, xwayland:1, title:win[0-9]+  # Bo góc 10px

# ######## Quy tắc không gian làm việc ########
# Không có khoảng cách bên ngoài khi chỉ có 1 cửa sổ trên workspace thật
workspace = w[tv1]s[false], gapsout:$singleWindowGapsOut
# Không có khoảng cách bên ngoài khi chỉ có 1 cửa sổ trên workspace toàn màn hình
workspace = f[1]s[false], gapsout:$singleWindowGapsOut

# ######## Quy tắc lớp ########
# Hiệu ứng chuyển cảnh fade
layerrule = animation fade, hyprpicker  # Công cụ chọn màu
layerrule = animation fade, logout_dialog  # Hộp thoại đăng xuất (wlogout)
layerrule = animation fade, selection  # Vùng chọn (slurp)
layerrule = animation fade, wayfreeze

# Fuzzel (trình khởi chạy ứng dụng)
layerrule = animation popin 80%, launcher  # Hiệu ứng pop-in 80%
layerrule = blur, launcher  # Làm mờ nền

# Shell (giao diện hệ thống)
layerrule = noanim, caelestia-(border-exclusion|area-picker)  # Không có hiệu ứng
layerrule = animation fade, caelestia-(drawers|background)  # Hiệu ứng fade

# Làm mờ và bỏ qua alpha cho drawers
layerrule = blur, caelestia-drawers
layerrule = ignorealpha 0.57, caelestia-drawers  # Bỏ qua độ trong suốt 0.57
